commands:
  - args:
      - porchctl
      - repo
      - register
      - --namespace=rpkg-lifecycle
      - --name=git
      - --repo-basic-password=secret
      - --repo-basic-username=nephio
      - http://gitea.gitea.svc.cluster.local:3000/nephio/rpkg-lifecycle
  - args:
      - porchctl
      - rpkg
      - init
      - --namespace=rpkg-lifecycle
      - --repository=git
      - --workspace=lifecycle
      - lifecycle-package
    stdout: |
      User request to init git.lifecycle-package.lifecycle is being processed.
      Please verify it's status using the command - "porchctl rpkg get -n rpkg-lifecycle git.lifecycle-package.lifecycle"
  - args:
      - porchctl
      - rpkg
      - propose
      - --namespace=rpkg-lifecycle
      - git.lifecycle-package.lifecycle
    stdout: |
      User request to propose git.lifecycle-package.lifecycle is being processed.
      Please verify it's status using the command - "porchctl rpkg get -n rpkg-lifecycle git.lifecycle-package.lifecycle"
  - args:
      - porchctl
      - rpkg
      - propose-delete
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stderr: "git.lifecycle-package.lifecycle failed (can only propose published packages for deletion; package git.lifecycle-package.lifecycle is not published)\nError: errors:\n  can only propose published packages for deletion; package git.lifecycle-package.lifecycle is not published \n"
    exitCode: 1
  - args:
      - porchctl
      - rpkg
      - get
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
      - --output=custom-columns=NAME:.metadata.name,PKG:.spec.packageName,REV:.spec.revision,LIFECYCLE:.spec.lifecycle
    stdout: |
      NAME                              PKG                 REV      LIFECYCLE
      git.lifecycle-package.lifecycle   lifecycle-package   <none>   Proposed
  - args:
      - porchctl
      - rpkg
      - reject
      - --namespace=rpkg-lifecycle
      - git.lifecycle-package.lifecycle
    stdout: |
      User request to reject git.lifecycle-package.lifecycle with state Proposed is being processed.
      Please verify it's status using the command - "porchctl rpkg get -n rpkg-lifecycle git.lifecycle-package.lifecycle"
  - args:
      - porchctl
      - rpkg
      - get
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stdout: |
      NAME                              PACKAGE             WORKSPACENAME   REVISION   LATEST   LIFECYCLE   REPOSITORY
      git.lifecycle-package.lifecycle   lifecycle-package   lifecycle       0          false    Draft       git
  - args:
      - porchctl
      - rpkg
      - propose-delete
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stderr: "git.lifecycle-package.lifecycle failed (can only propose published packages for deletion; package git.lifecycle-package.lifecycle is not published)\nError: errors:\n  can only propose published packages for deletion; package git.lifecycle-package.lifecycle is not published \n"
    exitCode: 1
  - args:
      - porchctl
      - rpkg
      - propose
      - --namespace=rpkg-lifecycle
      - git.lifecycle-package.lifecycle
    stdout: |
      User request to propose git.lifecycle-package.lifecycle is being processed.
      Please verify it's status using the command - "porchctl rpkg get -n rpkg-lifecycle git.lifecycle-package.lifecycle"
  - args:
      - porchctl
      - rpkg
      - get
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stdout: |
      NAME                              PACKAGE             WORKSPACENAME   REVISION   LATEST   LIFECYCLE   REPOSITORY
      git.lifecycle-package.lifecycle   lifecycle-package   lifecycle       0          false    Proposed    git
  - args:
      - porchctl
      - rpkg
      - approve
      - --namespace=rpkg-lifecycle
      - git.lifecycle-package.lifecycle
    stdout: |
      User request to approve git.lifecycle-package.lifecycle is being processed.
      Please verify it's status using the command - "porchctl rpkg get -n rpkg-lifecycle git.lifecycle-package.lifecycle"
  - args:
      - porchctl
      - rpkg
      - get
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stdout: |
      NAME                              PACKAGE             WORKSPACENAME   REVISION   LATEST   LIFECYCLE   REPOSITORY
      git.lifecycle-package.lifecycle   lifecycle-package   lifecycle       1          true     Published   git
  - args:
      - porchctl
      - rpkg
      - delete
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stderr: "git.lifecycle-package.lifecycle failed: cannot delete git.lifecycle-package.lifecycle with lifecycle 'Published'\nError: errors:\n  cannot delete git.lifecycle-package.lifecycle with lifecycle 'Published' \n"
    exitCode: 1
  - args:
      - porchctl
      - rpkg
      - propose-delete
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stdout: |
      User request to propose-delete git.lifecycle-package.lifecycle is being processed.
      Please verify it's status using the command - "porchctl rpkg get -n rpkg-lifecycle git.lifecycle-package.lifecycle"
  - args:
      - porchctl
      - rpkg
      - propose-delete
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stderr: "git.lifecycle-package.lifecycle failed (git.lifecycle-package.lifecycle is already proposed for deletion)\nError: errors:\n  git.lifecycle-package.lifecycle is already proposed for deletion \n"
    exitCode: 1
  - args:
      - porchctl
      - rpkg
      - get
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stdout: |
      NAME                              PACKAGE             WORKSPACENAME   REVISION   LATEST   LIFECYCLE          REPOSITORY
      git.lifecycle-package.lifecycle   lifecycle-package   lifecycle       1          true     DeletionProposed   git
  - args:
      - porchctl
      - rpkg
      - reject
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stdout: |
      User request to reject git.lifecycle-package.lifecycle with state DeletionProposed is being processed.
      Please verify it's status using the command - "porchctl rpkg get -n rpkg-lifecycle git.lifecycle-package.lifecycle"
  - args:
      - porchctl
      - rpkg
      - reject
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stderr: "git.lifecycle-package.lifecycle failed (cannot reject git.lifecycle-package.lifecycle with lifecycle 'Published')\nError: errors:\n  cannot reject git.lifecycle-package.lifecycle with lifecycle 'Published' \n"
    exitCode: 1
  - args:
      - porchctl
      - rpkg
      - get
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stdout: |
      NAME                              PACKAGE             WORKSPACENAME   REVISION   LATEST   LIFECYCLE   REPOSITORY
      git.lifecycle-package.lifecycle   lifecycle-package   lifecycle       1          true     Published   git
  - args:
      - porchctl
      - rpkg
      - propose-delete
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stdout: |
      User request to propose-delete git.lifecycle-package.lifecycle is being processed.
      Please verify it's status using the command - "porchctl rpkg get -n rpkg-lifecycle git.lifecycle-package.lifecycle"
  - args:
      - porchctl
      - rpkg
      - get
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stdout: |
      NAME                              PACKAGE             WORKSPACENAME   REVISION   LATEST   LIFECYCLE          REPOSITORY
      git.lifecycle-package.lifecycle   lifecycle-package   lifecycle       1          true     DeletionProposed   git
  - args:
      - porchctl
      - rpkg
      - delete
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stdout: |
      User request to del git.lifecycle-package.lifecycle is being processed.
      Please verify it's status using the command - "porchctl rpkg get -n rpkg-lifecycle git.lifecycle-package.lifecycle"
  - args:
      - porchctl
      - rpkg
      - get
      - git.lifecycle-package.lifecycle
      - --namespace=rpkg-lifecycle
    stderr: "Error: the server could not find the requested resource (get packagerevisions.porch.kpt.dev git.lifecycle-package.lifecycle) \n"
    exitCode: 1
